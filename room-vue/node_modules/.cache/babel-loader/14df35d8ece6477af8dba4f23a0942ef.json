{"ast":null,"code":"import \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.error.cause.js\";\nexport default {\n  data() {\n    return {\n      submitForm: {\n        type: 0,\n        title: '',\n        content: '',\n        roomId: null\n      },\n      submitFormRules: {\n        type: [{\n          required: true,\n          message: '请选择类型',\n          trigger: 'change'\n        }],\n        title: [{\n          required: true,\n          message: '请输入标题',\n          trigger: 'blur'\n        }],\n        content: [{\n          required: true,\n          message: '请输入内容',\n          trigger: 'blur'\n        }]\n      },\n      submitting: false,\n      roomList: [],\n      // 本地存储的反馈数据\n      localFeedbackData: []\n    };\n  },\n\n  created() {\n    this.getRoomList();\n    this.loadLocalFeedbackData();\n  },\n\n  methods: {\n    // 模拟获取自习室列表 - 不使用后端\n    getRoomList() {\n      // 使用模拟数据\n      const mockRooms = [{\n        id: 1,\n        roomNumber: '101',\n        location: 'A栋1楼'\n      }, {\n        id: 2,\n        roomNumber: '102',\n        location: 'A栋1楼'\n      }, {\n        id: 3,\n        roomNumber: '201',\n        location: 'B栋2楼'\n      }, {\n        id: 4,\n        roomNumber: '202',\n        location: 'B栋2楼'\n      }, {\n        id: 5,\n        roomNumber: '301',\n        location: 'C栋3楼'\n      }, {\n        id: 6,\n        roomNumber: '302',\n        location: 'C栋3楼'\n      }, {\n        id: 7,\n        roomNumber: '401',\n        location: 'D栋4楼'\n      }, {\n        id: 8,\n        roomNumber: '402',\n        location: 'D栋4楼'\n      }]; // 模拟网络延迟\n\n      setTimeout(() => {\n        this.roomList = mockRooms;\n        console.log('加载自习室列表（模拟数据）:', mockRooms);\n      }, 300);\n    },\n\n    // 提交反馈 - 全部在前端处理\n    handleSubmit() {\n      this.$refs.submitForm.validate(valid => {\n        if (valid) {\n          this.submitting = true; // 模拟网络请求延迟\n\n          setTimeout(() => {\n            try {\n              // 获取当前用户（模拟）\n              const currentUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\") || {\n                id: 10001,\n                name: '张三',\n                studentId: '20230001'\n              }; // 创建反馈对象\n\n              const feedback = {\n                id: Date.now(),\n                // 使用时间戳作为唯一ID\n                studentId: currentUser.id,\n                studentName: currentUser.name || '匿名用户',\n                studentNumber: currentUser.studentId || '未设置',\n                type: this.submitForm.type,\n                title: this.submitForm.title,\n                content: this.submitForm.content,\n                roomId: this.submitForm.roomId,\n                roomInfo: this.getRoomInfo(this.submitForm.roomId),\n                status: 0,\n                // 0-待处理, 1-处理中, 2-已解决\n                createTime: new Date().toLocaleString(),\n                updateTime: new Date().toLocaleString()\n              }; // 保存到本地存储\n\n              this.saveFeedbackToLocal(feedback); // 显示成功消息\n\n              this.$message({\n                message: '提交成功！反馈已保存到本地（不与后端连接）',\n                type: 'success',\n                duration: 3000\n              }); // 重置表单\n\n              this.resetSubmitForm();\n              this.submitting = false; // 1.5秒后提示可查看反馈\n\n              setTimeout(() => {\n                this.$message.info('点击\"查看我的反馈\"按钮可以查看所有提交的反馈');\n              }, 1500);\n            } catch (error) {\n              console.error('提交失败:', error);\n              this.$message.error('提交失败：' + error.message);\n              this.submitting = false;\n            }\n          }, 800); // 模拟800ms网络延迟\n        }\n      });\n    },\n\n    // 获取自习室信息\n    getRoomInfo(roomId) {\n      if (!roomId) return null;\n      const room = this.roomList.find(item => item.id === roomId);\n      return room ? `${room.roomNumber} - ${room.location}` : null;\n    },\n\n    // 保存反馈到本地存储\n    saveFeedbackToLocal(feedback) {\n      try {\n        // 从本地存储加载现有数据\n        let feedbacks = JSON.parse(localStorage.getItem('localFeedbacks') || '[]'); // 添加新反馈\n\n        feedbacks.unshift(feedback); // 添加到开头，最新在最前\n        // 保存回本地存储\n\n        localStorage.setItem('localFeedbacks', JSON.stringify(feedbacks)); // 更新组件数据\n\n        this.localFeedbackData = feedbacks;\n        console.log('反馈已保存到本地:', feedback);\n        return true;\n      } catch (error) {\n        console.error('保存到本地存储失败:', error);\n        throw new Error('保存失败，请检查本地存储');\n      }\n    },\n\n    // 从本地存储加载反馈数据\n    loadLocalFeedbackData() {\n      try {\n        const feedbacks = JSON.parse(localStorage.getItem('localFeedbacks') || '[]');\n        this.localFeedbackData = feedbacks;\n        console.log('从本地存储加载反馈数据:', feedbacks.length, '条');\n      } catch (error) {\n        console.error('加载本地反馈数据失败:', error);\n        this.localFeedbackData = [];\n      }\n    },\n\n    // 重置表单\n    resetSubmitForm() {\n      this.$refs.submitForm.resetFields();\n      this.$message.info('表单已重置');\n    },\n\n    // 查看我的反馈 - 显示本地数据\n    viewMyFeedback() {\n      if (this.localFeedbackData.length === 0) {\n        this.$alert('暂无反馈数据，请先提交反馈。', '我的反馈', {\n          confirmButtonText: '确定',\n          callback: action => {// 可以在这里添加跳转到反馈列表页面的逻辑\n            // this.$router.push('/feedbackList');\n          }\n        });\n      } else {\n        // 创建反馈列表的HTML内容\n        const feedbackHtml = this.createFeedbackHtml();\n        this.$alert(feedbackHtml, `我的反馈（共${this.localFeedbackData.length}条）`, {\n          dangerouslyUseHTMLString: true,\n          showConfirmButton: true,\n          showCancelButton: true,\n          confirmButtonText: '清空所有反馈',\n          cancelButtonText: '关闭',\n          customClass: 'feedback-dialog',\n          beforeClose: (action, instance, done) => {\n            if (action === 'confirm') {\n              this.$confirm('确定要清空所有反馈数据吗？此操作不可恢复。', '警告', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }).then(() => {\n                this.clearAllFeedback();\n                done();\n              }).catch(() => {// 用户取消，不关闭对话框\n              });\n            } else {\n              done();\n            }\n          }\n        });\n      }\n    },\n\n    // 创建反馈列表的HTML\n    createFeedbackHtml() {\n      let html = `\n        <div class=\"feedback-list\" style=\"max-height: 400px; overflow-y: auto;\">\n          <div style=\"margin-bottom: 15px; color: #666; font-size: 14px;\">\n            所有数据仅保存在本地浏览器中，清空缓存或更换浏览器会丢失数据。\n          </div>\n      `;\n      this.localFeedbackData.forEach((item, index) => {\n        const typeText = item.type === 0 ? '投诉' : '评价';\n        const typeColor = item.type === 0 ? '#f56c6c' : '#67c23a';\n        const statusText = ['待处理', '处理中', '已解决'][item.status] || '未知';\n        const statusColor = ['#e6a23c', '#409eff', '#67c23a'][item.status] || '#909399';\n        html += `\n          <div class=\"feedback-item\" style=\"\n            border: 1px solid #ebeef5;\n            border-radius: 4px;\n            padding: 12px;\n            margin-bottom: 10px;\n            background-color: #fafafa;\n          \">\n            <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;\">\n              <div>\n                <strong style=\"font-size: 16px;\">${item.title}</strong>\n                <span style=\"\n                  background-color: ${typeColor};\n                  color: white;\n                  padding: 2px 8px;\n                  border-radius: 10px;\n                  font-size: 12px;\n                  margin-left: 10px;\n                \">${typeText}</span>\n                <span style=\"\n                  background-color: ${statusColor};\n                  color: white;\n                  padding: 2px 8px;\n                  border-radius: 10px;\n                  font-size: 12px;\n                  margin-left: 5px;\n                \">${statusText}</span>\n              </div>\n              <div style=\"font-size: 12px; color: #909399;\">${item.createTime}</div>\n            </div>\n\n            <div style=\"margin-bottom: 8px; color: #606266;\">\n              ${item.content}\n            </div>\n\n            <div style=\"display: flex; justify-content: space-between; font-size: 12px; color: #909399;\">\n              <div>\n                ${item.roomInfo ? `关联自习室：${item.roomInfo}` : '未关联自习室'}\n              </div>\n              <div>\n                提交人：${item.studentName} (${item.studentNumber})\n              </div>\n            </div>\n          </div>\n        `;\n      });\n      html += `</div>`;\n      return html;\n    },\n\n    // 清空所有反馈数据\n    clearAllFeedback() {\n      try {\n        localStorage.removeItem('localFeedbacks');\n        this.localFeedbackData = [];\n        this.$message.success('所有反馈数据已清空');\n      } catch (error) {\n        this.$message.error('清空数据失败：' + error.message);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";;AAsCA;EACAA;IACA;MACAC;QACAC,OADA;QAEAC,SAFA;QAGAC,WAHA;QAIAC;MAJA,CADA;MAOAC;QACAJ;UAAAK;UAAAC;UAAAC;QAAA,EADA;QAEAN;UAAAI;UAAAC;UAAAC;QAAA,EAFA;QAGAL;UAAAG;UAAAC;UAAAC;QAAA;MAHA,CAPA;MAYAC,iBAZA;MAaAC,YAbA;MAcA;MACAC;IAfA;EAiBA,CAnBA;;EAoBAC;IACA;IACA;EACA,CAvBA;;EAwBAC;IACA;IACAC;MACA;MACA,mBACA;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAF;QAAAC;QAAAC;MAAA,CAFA,EAGA;QAAAF;QAAAC;QAAAC;MAAA,CAHA,EAIA;QAAAF;QAAAC;QAAAC;MAAA,CAJA,EAKA;QAAAF;QAAAC;QAAAC;MAAA,CALA,EAMA;QAAAF;QAAAC;QAAAC;MAAA,CANA,EAOA;QAAAF;QAAAC;QAAAC;MAAA,CAPA,EAQA;QAAAF;QAAAC;QAAAC;MAAA,CARA,EAFA,CAaA;;MACAC;QACA;QACAC;MACA,CAHA,EAGA,GAHA;IAIA,CApBA;;IAsBA;IACAC;MACA;QACA;UACA,uBADA,CAGA;;UACAF;YACA;cACA;cACA;gBACAH,SADA;gBAEAM,UAFA;gBAGAC;cAHA,EAFA,CAQA;;cACA;gBACAP,cADA;gBACA;gBACAO,yBAFA;gBAGAC,uCAHA;gBAIAC,6CAJA;gBAKAvB,0BALA;gBAMAC,4BANA;gBAOAC,gCAPA;gBAQAC,8BARA;gBASAqB,kDATA;gBAUAC,SAVA;gBAUA;gBACAC,uCAXA;gBAYAC;cAZA,EATA,CAwBA;;cACA,mCAzBA,CA2BA;;cACA;gBACArB,gCADA;gBAEAN,eAFA;gBAGA4B;cAHA,GA5BA,CAkCA;;cACA;cACA,wBApCA,CAsCA;;cACAX;gBACA;cACA,CAFA,EAEA,IAFA;YAIA,CA3CA,CA2CA;cACAC;cACA;cACA;YACA;UACA,CAjDA,EAiDA,GAjDA,EAJA,CAqDA;QACA;MACA,CAxDA;IAyDA,CAjFA;;IAmFA;IACAW;MACA;MACA;MACA;IACA,CAxFA;;IA0FA;IACAC;MACA;QACA;QACA,2EAFA,CAIA;;QACAC,4BALA,CAKA;QAEA;;QACAC,kEARA,CAUA;;QACA;QAEAd;QACA;MACA,CAfA,CAeA;QACAA;QACA;MACA;IACA,CA/GA;;IAiHA;IACAe;MACA;QACA;QACA;QACAf;MACA,CAJA,CAIA;QACAA;QACA;MACA;IACA,CA3HA;;IA6HA;IACAgB;MACA;MACA;IACA,CAjIA;;IAmIA;IACAC;MACA;QACA;UACAC,uBADA;UAEAC,qBACA;YACA;UACA;QALA;MAOA,CARA,MAQA;QACA;QACA;QAEA;UACAC,8BADA;UAEAC,uBAFA;UAGAC,sBAHA;UAIAJ,2BAJA;UAKAK,sBALA;UAMAC,8BANA;UAOAC;YACA;cACA;gBACAP,uBADA;gBAEAK,sBAFA;gBAGAzC;cAHA,GAIA4C,IAJA,CAIA;gBACA;gBACAC;cACA,CAPA,EAOAC,KAPA,CAOA,OACA;cACA,CATA;YAUA,CAXA,MAWA;cACAD;YACA;UACA;QAtBA;MAwBA;IACA,CA1KA;;IA4KA;IACAE;MACA;AACA;AACA;AACA;AACA;AACA,OALA;MAOA;QACA;QACA;QACA;QACA;QAEAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA5CA;MA6CA,CAnDA;MAqDAA;MACA;IACA,CA5OA;;IA8OA;IACAC;MACA;QACAjB;QACA;QACA;MACA,CAJA,CAIA;QACA;MACA;IACA;;EAvPA;AAxBA","names":["data","submitForm","type","title","content","roomId","submitFormRules","required","message","trigger","submitting","roomList","localFeedbackData","created","methods","getRoomList","id","roomNumber","location","setTimeout","console","handleSubmit","name","studentId","studentName","studentNumber","roomInfo","status","createTime","updateTime","duration","getRoomInfo","saveFeedbackToLocal","feedbacks","localStorage","loadLocalFeedbackData","resetSubmitForm","viewMyFeedback","confirmButtonText","callback","dangerouslyUseHTMLString","showConfirmButton","showCancelButton","cancelButtonText","customClass","beforeClose","then","done","catch","createFeedbackHtml","html","clearAllFeedback"],"sourceRoot":"src/views/student","sources":["feedback.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-card class=\"submit-card\">\r\n      <div slot=\"header\">\r\n        <span style=\"font-size: 18px; font-weight: bold;\">提交投诉/评价</span>\r\n        <el-tag type=\"info\" style=\"margin-left: 15px;\">纯前端演示模式</el-tag>\r\n      </div>\r\n      <el-form :model=\"submitForm\" :rules=\"submitFormRules\" ref=\"submitForm\" label-width=\"100px\" style=\"max-width: 600px;\">\r\n        <el-form-item label=\"类型\" prop=\"type\">\r\n          <el-radio-group v-model=\"submitForm.type\">\r\n            <el-radio :label=\"0\">投诉</el-radio>\r\n            <el-radio :label=\"1\">评价</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"submitForm.title\" placeholder=\"请输入标题\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"关联自习室\">\r\n          <el-select v-model=\"submitForm.roomId\" placeholder=\"请选择自习室（可选）\" style=\"width: 100%;\" clearable>\r\n            <el-option v-for=\"item in roomList\" :key=\"item.id\" :label=\"item.roomNumber + ' - ' + item.location\"\r\n                       :value=\"item.id\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"内容\" prop=\"content\">\r\n          <el-input type=\"textarea\" v-model=\"submitForm.content\" placeholder=\"请详细描述您的问题或建议\"\r\n                    :rows=\"8\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSubmit\" :loading=\"submitting\">提交</el-button>\r\n          <el-button @click=\"resetSubmitForm\">重置</el-button>\r\n          <el-button @click=\"viewMyFeedback\">查看我的反馈</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      submitForm: {\r\n        type: 0,\r\n        title: '',\r\n        content: '',\r\n        roomId: null\r\n      },\r\n      submitFormRules: {\r\n        type: [{required: true, message: '请选择类型', trigger: 'change'}],\r\n        title: [{required: true, message: '请输入标题', trigger: 'blur'}],\r\n        content: [{required: true, message: '请输入内容', trigger: 'blur'}]\r\n      },\r\n      submitting: false,\r\n      roomList: [],\r\n      // 本地存储的反馈数据\r\n      localFeedbackData: []\r\n    };\r\n  },\r\n  created() {\r\n    this.getRoomList();\r\n    this.loadLocalFeedbackData();\r\n  },\r\n  methods: {\r\n    // 模拟获取自习室列表 - 不使用后端\r\n    getRoomList() {\r\n      // 使用模拟数据\r\n      const mockRooms = [\r\n        { id: 1, roomNumber: '101', location: 'A栋1楼' },\r\n        { id: 2, roomNumber: '102', location: 'A栋1楼' },\r\n        { id: 3, roomNumber: '201', location: 'B栋2楼' },\r\n        { id: 4, roomNumber: '202', location: 'B栋2楼' },\r\n        { id: 5, roomNumber: '301', location: 'C栋3楼' },\r\n        { id: 6, roomNumber: '302', location: 'C栋3楼' },\r\n        { id: 7, roomNumber: '401', location: 'D栋4楼' },\r\n        { id: 8, roomNumber: '402', location: 'D栋4楼' }\r\n      ];\r\n\r\n      // 模拟网络延迟\r\n      setTimeout(() => {\r\n        this.roomList = mockRooms;\r\n        console.log('加载自习室列表（模拟数据）:', mockRooms);\r\n      }, 300);\r\n    },\r\n\r\n    // 提交反馈 - 全部在前端处理\r\n    handleSubmit() {\r\n      this.$refs.submitForm.validate(valid => {\r\n        if (valid) {\r\n          this.submitting = true;\r\n\r\n          // 模拟网络请求延迟\r\n          setTimeout(() => {\r\n            try {\r\n              // 获取当前用户（模拟）\r\n              const currentUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\") || {\r\n                id: 10001,\r\n                name: '张三',\r\n                studentId: '20230001'\r\n              };\r\n\r\n              // 创建反馈对象\r\n              const feedback = {\r\n                id: Date.now(), // 使用时间戳作为唯一ID\r\n                studentId: currentUser.id,\r\n                studentName: currentUser.name || '匿名用户',\r\n                studentNumber: currentUser.studentId || '未设置',\r\n                type: this.submitForm.type,\r\n                title: this.submitForm.title,\r\n                content: this.submitForm.content,\r\n                roomId: this.submitForm.roomId,\r\n                roomInfo: this.getRoomInfo(this.submitForm.roomId),\r\n                status: 0, // 0-待处理, 1-处理中, 2-已解决\r\n                createTime: new Date().toLocaleString(),\r\n                updateTime: new Date().toLocaleString()\r\n              };\r\n\r\n              // 保存到本地存储\r\n              this.saveFeedbackToLocal(feedback);\r\n\r\n              // 显示成功消息\r\n              this.$message({\r\n                message: '提交成功！反馈已保存到本地（不与后端连接）',\r\n                type: 'success',\r\n                duration: 3000\r\n              });\r\n\r\n              // 重置表单\r\n              this.resetSubmitForm();\r\n              this.submitting = false;\r\n\r\n              // 1.5秒后提示可查看反馈\r\n              setTimeout(() => {\r\n                this.$message.info('点击\"查看我的反馈\"按钮可以查看所有提交的反馈');\r\n              }, 1500);\r\n\r\n            } catch (error) {\r\n              console.error('提交失败:', error);\r\n              this.$message.error('提交失败：' + error.message);\r\n              this.submitting = false;\r\n            }\r\n          }, 800); // 模拟800ms网络延迟\r\n        }\r\n      });\r\n    },\r\n\r\n    // 获取自习室信息\r\n    getRoomInfo(roomId) {\r\n      if (!roomId) return null;\r\n      const room = this.roomList.find(item => item.id === roomId);\r\n      return room ? `${room.roomNumber} - ${room.location}` : null;\r\n    },\r\n\r\n    // 保存反馈到本地存储\r\n    saveFeedbackToLocal(feedback) {\r\n      try {\r\n        // 从本地存储加载现有数据\r\n        let feedbacks = JSON.parse(localStorage.getItem('localFeedbacks') || '[]');\r\n\r\n        // 添加新反馈\r\n        feedbacks.unshift(feedback); // 添加到开头，最新在最前\r\n\r\n        // 保存回本地存储\r\n        localStorage.setItem('localFeedbacks', JSON.stringify(feedbacks));\r\n\r\n        // 更新组件数据\r\n        this.localFeedbackData = feedbacks;\r\n\r\n        console.log('反馈已保存到本地:', feedback);\r\n        return true;\r\n      } catch (error) {\r\n        console.error('保存到本地存储失败:', error);\r\n        throw new Error('保存失败，请检查本地存储');\r\n      }\r\n    },\r\n\r\n    // 从本地存储加载反馈数据\r\n    loadLocalFeedbackData() {\r\n      try {\r\n        const feedbacks = JSON.parse(localStorage.getItem('localFeedbacks') || '[]');\r\n        this.localFeedbackData = feedbacks;\r\n        console.log('从本地存储加载反馈数据:', feedbacks.length, '条');\r\n      } catch (error) {\r\n        console.error('加载本地反馈数据失败:', error);\r\n        this.localFeedbackData = [];\r\n      }\r\n    },\r\n\r\n    // 重置表单\r\n    resetSubmitForm() {\r\n      this.$refs.submitForm.resetFields();\r\n      this.$message.info('表单已重置');\r\n    },\r\n\r\n    // 查看我的反馈 - 显示本地数据\r\n    viewMyFeedback() {\r\n      if (this.localFeedbackData.length === 0) {\r\n        this.$alert('暂无反馈数据，请先提交反馈。', '我的反馈', {\r\n          confirmButtonText: '确定',\r\n          callback: action => {\r\n            // 可以在这里添加跳转到反馈列表页面的逻辑\r\n            // this.$router.push('/feedbackList');\r\n          }\r\n        });\r\n      } else {\r\n        // 创建反馈列表的HTML内容\r\n        const feedbackHtml = this.createFeedbackHtml();\r\n\r\n        this.$alert(feedbackHtml, `我的反馈（共${this.localFeedbackData.length}条）`, {\r\n          dangerouslyUseHTMLString: true,\r\n          showConfirmButton: true,\r\n          showCancelButton: true,\r\n          confirmButtonText: '清空所有反馈',\r\n          cancelButtonText: '关闭',\r\n          customClass: 'feedback-dialog',\r\n          beforeClose: (action, instance, done) => {\r\n            if (action === 'confirm') {\r\n              this.$confirm('确定要清空所有反馈数据吗？此操作不可恢复。', '警告', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n              }).then(() => {\r\n                this.clearAllFeedback();\r\n                done();\r\n              }).catch(() => {\r\n                // 用户取消，不关闭对话框\r\n              });\r\n            } else {\r\n              done();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    // 创建反馈列表的HTML\r\n    createFeedbackHtml() {\r\n      let html = `\r\n        <div class=\"feedback-list\" style=\"max-height: 400px; overflow-y: auto;\">\r\n          <div style=\"margin-bottom: 15px; color: #666; font-size: 14px;\">\r\n            所有数据仅保存在本地浏览器中，清空缓存或更换浏览器会丢失数据。\r\n          </div>\r\n      `;\r\n\r\n      this.localFeedbackData.forEach((item, index) => {\r\n        const typeText = item.type === 0 ? '投诉' : '评价';\r\n        const typeColor = item.type === 0 ? '#f56c6c' : '#67c23a';\r\n        const statusText = ['待处理', '处理中', '已解决'][item.status] || '未知';\r\n        const statusColor = ['#e6a23c', '#409eff', '#67c23a'][item.status] || '#909399';\r\n\r\n        html += `\r\n          <div class=\"feedback-item\" style=\"\r\n            border: 1px solid #ebeef5;\r\n            border-radius: 4px;\r\n            padding: 12px;\r\n            margin-bottom: 10px;\r\n            background-color: #fafafa;\r\n          \">\r\n            <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;\">\r\n              <div>\r\n                <strong style=\"font-size: 16px;\">${item.title}</strong>\r\n                <span style=\"\r\n                  background-color: ${typeColor};\r\n                  color: white;\r\n                  padding: 2px 8px;\r\n                  border-radius: 10px;\r\n                  font-size: 12px;\r\n                  margin-left: 10px;\r\n                \">${typeText}</span>\r\n                <span style=\"\r\n                  background-color: ${statusColor};\r\n                  color: white;\r\n                  padding: 2px 8px;\r\n                  border-radius: 10px;\r\n                  font-size: 12px;\r\n                  margin-left: 5px;\r\n                \">${statusText}</span>\r\n              </div>\r\n              <div style=\"font-size: 12px; color: #909399;\">${item.createTime}</div>\r\n            </div>\r\n\r\n            <div style=\"margin-bottom: 8px; color: #606266;\">\r\n              ${item.content}\r\n            </div>\r\n\r\n            <div style=\"display: flex; justify-content: space-between; font-size: 12px; color: #909399;\">\r\n              <div>\r\n                ${item.roomInfo ? `关联自习室：${item.roomInfo}` : '未关联自习室'}\r\n              </div>\r\n              <div>\r\n                提交人：${item.studentName} (${item.studentNumber})\r\n              </div>\r\n            </div>\r\n          </div>\r\n        `;\r\n      });\r\n\r\n      html += `</div>`;\r\n      return html;\r\n    },\r\n\r\n    // 清空所有反馈数据\r\n    clearAllFeedback() {\r\n      try {\r\n        localStorage.removeItem('localFeedbacks');\r\n        this.localFeedbackData = [];\r\n        this.$message.success('所有反馈数据已清空');\r\n      } catch (error) {\r\n        this.$message.error('清空数据失败：' + error.message);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.submit-card {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* 对话框样式 */\r\n:deep(.feedback-dialog) {\r\n  width: 700px;\r\n  max-width: 90%;\r\n}\r\n\r\n:deep(.feedback-dialog .el-message-box__content) {\r\n  max-height: 500px;\r\n  overflow: hidden;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}