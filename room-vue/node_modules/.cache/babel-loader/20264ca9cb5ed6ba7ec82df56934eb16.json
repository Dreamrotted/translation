{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  data() {\n    return {\n      dataList: [],\n      // 表格数据\n      current: 1,\n      // 当前页码\n      pageSize: 10,\n      // 每页条数\n      totalPage: 0,\n      // 总条数\n      dataListLoading: false,\n      // 加载状态\n      dialogVisible: false,\n      // 弹窗显示状态\n      dialogTitle: '',\n      // 弹窗标题\n      form: {\n        id: null,\n        studentNumber: '',\n        studentName: '',\n        gender: 1,\n        majorName: '',\n        password: ''\n      },\n      rules: {\n        studentNumber: [{\n          required: true,\n          message: '请输入学号',\n          trigger: 'blur'\n        }],\n        studentName: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }],\n        gender: [{\n          required: true,\n          message: '请选择性别',\n          trigger: 'change'\n        }],\n        majorName: [{\n          required: true,\n          message: '请输入专业',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  created() {\n    this.getDataList();\n  },\n\n  methods: {\n    // 获取表格数据\n    getDataList() {\n      this.dataListLoading = true;\n      request.get(\"student/page\", {\n        params: {\n          pageNum: this.current,\n          pageSize: this.pageSize\n        }\n      }).then(resp => {\n        if (resp.code === 200) {\n          this.dataList = resp.data.list;\n          this.totalPage = resp.data.total;\n        } else {\n          this.dataList = [];\n        }\n\n        this.dataListLoading = false;\n      });\n    },\n\n    // 删除数据\n    del(id) {\n      this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        request.delete(\"/student/delete/\" + id).then(res => {\n          if (res.code === 200) {\n            this.$notify.success('删除成功');\n            this.getDataList();\n          } else {\n            this.$notify.error(res.message);\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    // 分页大小变化\n    sizeChangeHandle(val) {\n      this.pageSize = val;\n      this.current = 1;\n      this.getDataList();\n    },\n\n    // 当前页码变化\n    currentChangeHandle(val) {\n      this.current = val;\n      this.getDataList();\n    },\n\n    // 新增按钮点击事件\n    handleAdd() {\n      this.dialogTitle = '新增学生';\n      this.dialogVisible = true;\n      this.resetForm();\n    },\n\n    // 编辑按钮点击事件\n    handleEdit(row) {\n      this.dialogTitle = '编辑学生';\n      this.dialogVisible = true;\n      this.form = { ...row\n      };\n    },\n\n    // 提交表单\n    submitForm() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          if (this.form.id) {\n            // 编辑\n            request.put(\"/student/update\", this.form).then(res => {\n              if (res.code === 200) {\n                this.$notify.success(\"修改成功\");\n                this.dialogVisible = false;\n                this.getDataList();\n              } else {\n                this.$notify.error(res.message);\n              }\n            });\n          } else {\n            // 新增\n            request.post(\"/student/add\", this.form).then(res => {\n              if (res.code === 200) {\n                this.$notify.success(\"新增成功\");\n                this.dialogVisible = false;\n                this.getDataList();\n              } else {\n                this.$notify.error(res.message);\n              }\n            });\n          }\n        }\n      });\n    },\n\n    // 重置表单\n    resetForm() {\n      this.form = {\n        id: null,\n        studentNumber: '',\n        studentName: '',\n        gender: 1,\n        majorName: ''\n      };\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA+EA;AAEA;EACAA;IACA;MACAC,YADA;MACA;MACAC,UAFA;MAEA;MACAC,YAHA;MAGA;MACAC,YAJA;MAIA;MACAC,sBALA;MAKA;MAEAC,oBAPA;MAOA;MACAC,eARA;MAQA;MACAC;QACAC,QADA;QAEAC,iBAFA;QAGAC,eAHA;QAIAC,SAJA;QAKAC,aALA;QAMAC;MANA,CATA;MAiBAC;QACAL;UAAAM;UAAAC;UAAAC;QAAA,EADA;QAEAP;UAAAK;UAAAC;UAAAC;QAAA,EAFA;QAGAN;UAAAI;UAAAC;UAAAC;QAAA,EAHA;QAIAL;UAAAG;UAAAC;UAAAC;QAAA,EAJA;QAKAJ;UAAAE;UAAAC;UAAAC;QAAA;MALA;IAjBA;EAyBA,CA3BA;;EA4BAC;IACA;EACA,CA9BA;;EA+BAC;IACA;IACAC;MACA;MACAC,QACAC,GADA,CACA,cADA,EACA;QACAC;UACAC,qBADA;UAEAtB;QAFA;MADA,CADA,EAOAuB,IAPA,CAOAC;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;;QACA;MACA,CAfA;IAgBA,CApBA;;IAqBA;IACAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAL,IAJA,CAIA;QACAJ;UACA;YACA;YACA;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CAbA,EAaAU,KAbA,CAaA;QACA;UACAD,YADA;UAEAd;QAFA;MAIA,CAlBA;IAmBA,CA1CA;;IA2CA;IACAgB;MACA;MACA;MACA;IACA,CAhDA;;IAiDA;IACAC;MACA;MACA;IACA,CArDA;;IAsDA;IACAC;MACA;MACA;MACA;IACA,CA3DA;;IA4DA;IACAC;MACA;MACA;MACA;MAAA;IACA,CAjEA;;IAkEA;IACAC;MACA;QACA;UACA;YACA;YACAf;cACA;gBACA;gBACA;gBACA;cACA,CAJA,MAIA;gBACA;cACA;YACA,CARA;UASA,CAXA,MAWA;YACA;YACAA;cACA;gBACA;gBACA;gBACA;cACA,CAJA,MAIA;gBACA;cACA;YACA,CARA;UASA;QACA;MACA,CA1BA;IA2BA,CA/FA;;IAgGA;IACAgB;MACA;QACA7B,QADA;QAEAC,iBAFA;QAGAC,eAHA;QAIAC,SAJA;QAKAC;MALA;IAOA;;EAzGA;AA/BA","names":["data","dataList","current","pageSize","totalPage","dataListLoading","dialogVisible","dialogTitle","form","id","studentNumber","studentName","gender","majorName","password","rules","required","message","trigger","created","methods","getDataList","request","get","params","pageNum","then","resp","del","confirmButtonText","cancelButtonText","type","catch","sizeChangeHandle","currentChangeHandle","handleAdd","handleEdit","submitForm","resetForm"],"sourceRoot":"src/views/admin","sources":["student.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"action-bar\">\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"handleAdd\">新增</el-button>\r\n    </div>\r\n\r\n    <div class=\"table-container\">\r\n      <el-table\r\n          :data=\"dataList\"\r\n          v-loading=\"dataListLoading\"\r\n          stripe\r\n          border\r\n          highlight-current-row\r\n      >\r\n        <el-table-column type=\"index\" min-width=\"80\" header-align=\"center\" align=\"center\" label=\"序号\"></el-table-column>\r\n        <el-table-column prop=\"studentNumber\" min-width=\"120\" header-align=\"center\" align=\"center\" label=\"学号\">\r\n        </el-table-column>\r\n<!--        <el-table-column prop=\"password\" min-width=\"200\" header-align=\"center\" align=\"center\" label=\"密码\">-->\r\n<!--        </el-table-column>-->\r\n        <el-table-column prop=\"studentName\" min-width=\"120\" header-align=\"center\" align=\"center\" label=\"姓名\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"gender\" min-width=\"80\" header-align=\"center\" align=\"center\" label=\"性别\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.gender === 1 ? '男' : '女' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"majorName\" min-width=\"120\" header-align=\"center\" align=\"center\" label=\"专业\">\r\n        </el-table-column>\r\n        <el-table-column min-width=\"180\" header-align=\"center\" align=\"center\" label=\"操作\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"primary\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n            <el-button type=\"danger\" @click=\"del(scope.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n        style=\"margin-top: 20px; text-align: center\"\r\n        @size-change=\"sizeChangeHandle\"\r\n        @current-change=\"currentChangeHandle\"\r\n        :current-page=\"current\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"totalPage\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n    ></el-pagination>\r\n\r\n    <!-- 新增/编辑弹窗 -->\r\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"30%\">\r\n      <el-form :model=\"form\" label-width=\"80px\" ref=\"form\" :rules=\"rules\">\r\n        <el-form-item label=\"学号\" prop=\"studentNumber\">\r\n          <el-input v-model=\"form.studentNumber\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"!form.id\">\r\n          <el-input v-model=\"form.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" prop=\"studentName\">\r\n          <el-input v-model=\"form.studentName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"gender\">\r\n          <el-radio-group v-model=\"form.gender\">\r\n            <el-radio :label=\"1\">男</el-radio>\r\n            <el-radio :label=\"0\">女</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"专业\" prop=\"majorName\">\r\n          <el-input v-model=\"form.majorName\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataList: [], // 表格数据\r\n      current: 1, // 当前页码\r\n      pageSize: 10, // 每页条数\r\n      totalPage: 0, // 总条数\r\n      dataListLoading: false, // 加载状态\r\n\r\n      dialogVisible: false, // 弹窗显示状态\r\n      dialogTitle: '', // 弹窗标题\r\n      form: {\r\n        id: null,\r\n        studentNumber: '',\r\n        studentName: '',\r\n        gender: 1,\r\n        majorName: '',\r\n        password:''\r\n      },\r\n      rules: {\r\n        studentNumber: [{ required: true, message: '请输入学号', trigger: 'blur' }],\r\n        studentName: [{ required: true, message: '请输入姓名', trigger: 'blur' }],\r\n        gender: [{ required: true, message: '请选择性别', trigger: 'change' }],\r\n        majorName: [{ required: true, message: '请输入专业', trigger: 'blur' }],\r\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getDataList();\r\n  },\r\n  methods: {\r\n    // 获取表格数据\r\n    getDataList() {\r\n      this.dataListLoading = true;\r\n      request\r\n          .get(\"student/page\", {\r\n            params: {\r\n              pageNum: this.current,\r\n              pageSize: this.pageSize,\r\n            },\r\n          })\r\n          .then((resp) => {\r\n            if (resp.code === 200) {\r\n              this.dataList = resp.data.list;\r\n              this.totalPage = resp.data.total;\r\n            } else {\r\n              this.dataList = [];\r\n            }\r\n            this.dataListLoading = false;\r\n          });\r\n    },\r\n    // 删除数据\r\n    del(id) {\r\n      this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        request.delete(\"/student/delete/\" + id).then(res => {\r\n          if (res.code === 200) {\r\n            this.$notify.success('删除成功')\r\n            this.getDataList()\r\n          } else {\r\n            this.$notify.error(res.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n    // 分页大小变化\r\n    sizeChangeHandle(val) {\r\n      this.pageSize = val;\r\n      this.current = 1;\r\n      this.getDataList();\r\n    },\r\n    // 当前页码变化\r\n    currentChangeHandle(val) {\r\n      this.current = val;\r\n      this.getDataList();\r\n    },\r\n    // 新增按钮点击事件\r\n    handleAdd() {\r\n      this.dialogTitle = '新增学生';\r\n      this.dialogVisible = true;\r\n      this.resetForm();\r\n    },\r\n    // 编辑按钮点击事件\r\n    handleEdit(row) {\r\n      this.dialogTitle = '编辑学生';\r\n      this.dialogVisible = true;\r\n      this.form = { ...row };\r\n    },\r\n    // 提交表单\r\n    submitForm() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          if (this.form.id) {\r\n            // 编辑\r\n            request.put(\"/student/update\", this.form).then(res => {\r\n              if (res.code === 200) {\r\n                this.$notify.success(\"修改成功\");\r\n                this.dialogVisible = false;\r\n                this.getDataList();\r\n              } else {\r\n                this.$notify.error(res.message);\r\n              }\r\n            });\r\n          } else {\r\n            // 新增\r\n            request.post(\"/student/add\", this.form).then(res => {\r\n              if (res.code === 200) {\r\n                this.$notify.success(\"新增成功\");\r\n                this.dialogVisible = false;\r\n                this.getDataList();\r\n              } else {\r\n                this.$notify.error(res.message);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 重置表单\r\n    resetForm() {\r\n      this.form = {\r\n        id: null,\r\n        studentNumber: '',\r\n        studentName: '',\r\n        gender: 1,\r\n        majorName: ''\r\n      };\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.container {\r\n  padding: 20px;\r\n}\r\n\r\n.action-bar {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.table-container {\r\n  overflow-x: auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}