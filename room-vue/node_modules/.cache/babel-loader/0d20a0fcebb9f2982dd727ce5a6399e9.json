{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\n\nvar SankeyPathShape =\n/** @class */\nfunction () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n\n  return SankeyPathShape;\n}();\n\nvar SankeyPath =\n/** @class */\nfunction (_super) {\n  __extends(SankeyPath, _super);\n\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  };\n\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  return SankeyPath;\n}(graphic.Path);\n\nvar SankeyView =\n/** @class */\nfunction (_super) {\n  __extends(SankeyView, _super);\n\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex, // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  };\n\n  SankeyView.prototype.dispose = function () {};\n\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\n * Special color, use source node color or target node color\n * @param curveProps curve's style to parse\n * @param orient direction\n * @param edge current curve data\n */\n\n\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n\n  }\n} // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default SankeyView;","map":{"version":3,"names":["__extends","graphic","enterEmphasis","leaveEmphasis","toggleHoverEmphasis","setStatesStylesFromModel","ChartView","setLabelStyle","getLabelStatesModels","getECData","isString","retrieve3","SankeyPathShape","x1","y1","x2","y2","cpx1","cpy1","cpx2","cpy2","extent","SankeyPath","_super","opts","call","prototype","getDefaultShape","buildPath","ctx","shape","moveTo","bezierCurveTo","orient","lineTo","closePath","highlight","downplay","Path","SankeyView","_this","apply","arguments","type","_focusAdjacencyDisabled","render","seriesModel","ecModel","api","sankeyView","graph","getGraph","group","layoutInfo","width","height","nodeData","getData","edgeData","get","_model","removeAll","x","y","eachEdge","edge","curve","ecData","dataIndex","seriesIndex","dataType","edgeModel","getModel","lineStyleModel","curvature","n1Layout","node1","getLayout","node1Model","dragX1","dragY1","n2Layout","node2","node2Model","dragX2","dragY2","edgeLayout","Math","max","dy","sy","ty","dx","setShape","useStyle","getItemStyle","applyCurveStyle","style","defaultEdgeLabelText","edgeLabelStateModels","labelFetcher","getFormattedLabel","stateName","labelDimIndex","formatter","extendParams","normal","labelDataIndex","defaultText","setTextConfig","position","emphasisModel","model","add","setItemGraphicEl","focus","getAdjacentDataIndices","getTrajectoryDataIndices","eachNode","node","layout","itemModel","dragX","dragY","rect","Rect","z2","id","disableLabelAnimation","setStyle","getVisual","decal","eachItemGraphicEl","el","getItemModel","drift","dirty","dispatchAction","seriesId","getRawIndex","localX","localY","ondragend","draggable","cursor","_data","isAnimationEnabled","setClipPath","createGridClipShape","getBoundingRect","removeClipPath","dispose","curveProps","fill","sourceColor","targetColor","LinearGradient","color","offset","cb","rectEl","initProps"],"sources":["C:/Users/86138/Desktop/软件/room/room-vue/node_modules/echarts/lib/chart/sankey/SankeyView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\nvar SankeyPathShape = /** @class */function () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n  return SankeyPathShape;\n}();\nvar SankeyPath = /** @class */function (_super) {\n  __extends(SankeyPath, _super);\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n    ctx.closePath();\n  };\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  return SankeyPath;\n}(graphic.Path);\nvar SankeyView = /** @class */function (_super) {\n  __extends(SankeyView, _super);\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo;\n    // view width\n    var width = layoutInfo.width;\n    // view height\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y;\n    // generate a bezire Curve for each edge\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle());\n      // Special color, use source node color or target node color\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex,\n            // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    // Generate a rect for each node\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n    this._data = seriesModel.getData();\n  };\n  SankeyView.prototype.dispose = function () {};\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\n * Special color, use source node color or target node color\n * @param curveProps curve's style to parse\n * @param orient direction\n * @param edge current curve data\n */\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n  }\n}\n// Add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default SankeyView;"],"mappings":"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"},"metadata":{},"sourceType":"module"}