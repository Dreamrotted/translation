{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/utils/request\";\nimport el from \"element-ui/src/locale/lang/el\";\nexport default {\n  name: 'Login',\n\n  data() {\n    return {\n      user: {\n        account: '',\n        password: '',\n        role: ''\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 10,\n          message: '长度在3-10个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 10,\n          message: '长度在3-10个字符',\n          trigger: 'blur'\n        }],\n        role: [{\n          required: true,\n          message: '请选择角色',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    login() {\n      this.$refs['loginForm'].validate(valid => {\n        if (valid) {\n          request.post('/login', this.user).then(res => {\n            if (res.code === 200) {\n              this.$notify.success(\"登录成功\");\n              localStorage.setItem('user', JSON.stringify(res.data.user));\n              localStorage.setItem('token', res.data.token);\n              localStorage.setItem('role', res.data.role);\n\n              if (res.data.role === 'student') {\n                this.$router.push('/reservationRoom');\n              } else {\n                this.$router.push('/dashboard');\n              }\n            } else {\n              this.$notify.error(res.message);\n            }\n          }).catch(() => {\n            this.$notify.error(\"登录失败\");\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA4BA;AACA;AAEA;EACAA,aADA;;EAEAC;IACA;MACAC;QACAC,WADA;QAEAC,YAFA;QAGAC;MAHA,CADA;MAMAC;QACAH,UACA;UAAAI;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,CAFA,CADA;QAKAL,WACA;UAAAG;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,CAFA,CALA;QASAJ,OACA;UAAAE;UAAAC;UAAAC;QAAA,CADA;MATA;IANA;EAoBA,CAvBA;;EAwBAG;IACAC;MACA;QACA;UACAC;YACA;cACA;cACAC;cACAA;cACAA;;cACA;gBACA;cACA,CAFA,MAEA;gBACA;cACA;YACA,CAVA,MAUA;cACA;YACA;UACA,CAdA,EAcAC,KAdA,CAcA;YACA;UACA,CAhBA;QAiBA;MACA,CApBA;IAqBA;;EAvBA;AAxBA","names":["name","data","user","account","password","role","rules","required","message","trigger","min","max","methods","login","request","localStorage","catch"],"sourceRoot":"src/views/login","sources":["login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-card\">\r\n      <div class=\"title\">登 录</div>\r\n      <el-form :model=\"user\" :rules=\"rules\" ref=\"loginForm\">\r\n        <el-form-item prop=\"account\" label=\"账号\">\r\n          <el-input placeholder=\"请输入账号\" prefix-icon=\"el-icon-user\" v-model=\"user.account\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\" label=\"密码\">\r\n          <el-input placeholder=\"请输入密码\" show-password prefix-icon=\"el-icon-lock\"\r\n                    v-model=\"user.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色\" prop=\"role\">\r\n          <el-radio-group v-model=\"user.role\">\r\n            <el-radio label=\"student\">学生</el-radio>\r\n            <el-radio label=\"admin\">管理员</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-button class=\"login-button\" size=\"medium\" type=\"primary\" @click=\"login\">登录</el-button>\r\n        <div class=\"register-link\">\r\n          没有账号？<router-link to=\"/register\">立即注册</router-link>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport el from \"element-ui/src/locale/lang/el\";\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      user: {\r\n        account: '',\r\n        password: '',\r\n        role: ''\r\n      },\r\n      rules: {\r\n        account: [\r\n          {required: true, message: '请输入用户名', trigger: 'blur'},\r\n          {min: 3, max: 10, message: '长度在3-10个字符', trigger: 'blur'}\r\n        ],\r\n        password: [\r\n          {required: true, message: '请输入密码', trigger: 'blur'},\r\n          {min: 3, max: 10, message: '长度在3-10个字符', trigger: 'blur'}\r\n        ],\r\n        role: [\r\n          {required: true, message: '请选择角色', trigger: 'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      this.$refs['loginForm'].validate((valid) => {\r\n        if (valid) {\r\n          request.post('/login', this.user).then(res => {\r\n            if (res.code === 200) {\r\n              this.$notify.success(\"登录成功\")\r\n              localStorage.setItem('user', JSON.stringify(res.data.user))\r\n              localStorage.setItem('token', res.data.token)\r\n              localStorage.setItem('role', res.data.role)\r\n              if (res.data.role === 'student') {\r\n                this.$router.push('/reservationRoom')\r\n              } else {\r\n                this.$router.push('/dashboard')\r\n              }\r\n            } else {\r\n              this.$notify.error(res.message)\r\n            }\r\n          }).catch(() => {\r\n            this.$notify.error(\"登录失败\")\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n\r\n.login-card {\r\n  background: #fff;\r\n  padding: 40px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n  width: 400px;\r\n  text-align: center;\r\n}\r\n\r\n.title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\n.login-button {\r\n  width: 100%;\r\n  margin-top: 20px;\r\n  border-radius: 20px;\r\n  background-color: #2575fc;\r\n  border: none;\r\n}\r\n\r\n.login-button:hover {\r\n  background-color: #1a5bbf;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-input {\r\n  border-radius: 20px;\r\n}\r\n\r\n.register-link {\r\n  margin-top: 20px;\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.register-link a {\r\n  color: #2575fc;\r\n  text-decoration: none;\r\n}\r\n\r\n.register-link a:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}